# SQL Notebooks for maintable SQLPage SQL

## Introduction

Spry's SQL Notebooks concept allows you to generate, manage, and execute SQL
code in a modular and organized manner. This system is composed of various
TypeScript modules that provide a unified structure for handling SQL in a
programmatic and type-safe way.

### Overview of Modules

**sqlpage.ts**: Extends the notebook concept to SQLPage files, allowing for the
management and upsertion of SQLPage content, which is used to serve web UI pages
in the RSSD environment.

## Core Concepts

### TypicalSqlPageNotebook

The `TypicalSqlPageNotebook` class in `sqlpage.ts` extends the notebook concept
to SQLPage files, which are used to generate and manage content for web UIs
within the RSSD. It includes:

- **Shell Configuration**: Utilities to manage the "shell" or wrapper around
  SQLPage content, including breadcrumbs and page titles.
- **Navigation Management**: Methods to generate and manage navigation routes
  within the SQLPage system.
- **File Upserts**: Functionality to generate SQL that upserts content into the
  `sqlpage_files` table, ensuring that SQLPage content is stored in the database
  rather than the file system.

## How the System Works Together

The SQL Notebooks system is designed to allow for modular and organized SQL
generation, which can be stored and managed within the RSSD. Here's how the
components work together:

1. **Defining Notebooks**: You define notebooks by subclassing
   `TypicalCodeNotebook` or `TypicalSqlPageNotebook`. These subclasses allow you
   to define methods that generate SQL or other code, which is then stored and
   managed within the RSSD.

2. **Generating SQL**: The methods within these subclasses can be decorated with
   metadata, such as `@cell` or `@shell`, which configures how the generated SQL
   should be managed. These methods can also be used to define SQL pages that
   are served as part of the web UI.

3. **Executing and Storing SQL**: The SQL generated by these notebooks can be
   executed directly, or it can be stored in the `sqlpage_files` or other
   relevant tables within the RSSD, ensuring that all SQL and content are
   managed consistently within the system.

4. **Unified System**: By leveraging the core concepts provided in `rssd.ts`,
   `code.ts`, and `sqlpage.ts`, you create a unified system where SQL
   generation, execution, and storage are all handled in a consistent,
   type-safe, and traceable manner.

## Example Usage

Here's a simple example to illustrate how you might use this system:

```typescript
import { TypicalSqlPageNotebook, shell, navigation } from "./sqlpage.ts";

class MyNotebook extends TypicalSqlPageNotebook {
  constructor() {
    super();
  }

  @shell({ path: "/index.sql" })
  index() {
    return this.SQL\`SELECT * FROM my_table;\`;
  }

  @navigation({
    caption: "Home",
    title: "Homepage",
    description: "The main page of the notebook"
  })
  index() {
    return this.SQL\`SELECT * FROM my_table;\`;
  }
}

// Create an instance of the notebook
const notebook = new MyNotebook();

// Generate SQL statements from the notebook methods
const sqlStatements = await TypicalSqlPageNotebook.SQL(notebook);

// Outputs SQL including the notebook-specific shell and navigation configurations
console.log(sqlStatements);
```

This example demonstrates how you can define a notebook, generate SQL, and
manage SQLPage content, all within the unified TypeScript framework.
